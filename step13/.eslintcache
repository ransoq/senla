[{"D:\\Work\\senla\\step13\\src\\index.tsx":"1","D:\\Work\\senla\\step13\\src\\store.tsx":"2","D:\\Work\\senla\\step13\\src\\services\\bookstore-service.tsx":"3","D:\\Work\\senla\\step13\\src\\components\\app\\app.tsx":"4","D:\\Work\\senla\\step13\\src\\components\\error-boundry\\error-boundry.tsx":"5","D:\\Work\\senla\\step13\\src\\components\\bookstore-service-context\\bookstore-service-context.tsx":"6","D:\\Work\\senla\\step13\\src\\components\\header\\header.tsx":"7","D:\\Work\\senla\\step13\\src\\components\\error-indicator\\error-indicator.tsx":"8","D:\\Work\\senla\\step13\\src\\reducers\\index.tsx":"9","D:\\Work\\senla\\step13\\src\\components\\pages\\index.tsx":"10","D:\\Work\\senla\\step13\\src\\components\\pages\\home-page.tsx":"11","D:\\Work\\senla\\step13\\src\\components\\pages\\cart-page.tsx":"12","D:\\Work\\senla\\step13\\src\\components\\book-list\\book-list.tsx":"13","D:\\Work\\senla\\step13\\src\\components\\cart-table\\cart-table.tsx":"14","D:\\Work\\senla\\step13\\src\\components\\book-list-item\\book-list-item.tsx":"15","D:\\Work\\senla\\step13\\src\\components\\hoc\\with-bookstore-service.tsx":"16","D:\\Work\\senla\\step13\\src\\actions\\actions.tsx":"17","D:\\Work\\senla\\step13\\src\\components\\spinner\\spinner.tsx":"18","D:\\Work\\senla\\step13\\src\\components\\theme-context\\theme-context.tsx":"19","D:\\Work\\senla\\step13\\src\\components\\theme-toggler-button\\theme-toggler-button.tsx":"20"},{"size":878,"mtime":1611851031769,"results":"21","hashOfConfig":"22"},{"size":890,"mtime":1611797407110,"results":"23","hashOfConfig":"22"},{"size":746,"mtime":1611797407595,"results":"24","hashOfConfig":"22"},{"size":1114,"mtime":1611851799336,"results":"25","hashOfConfig":"22"},{"size":495,"mtime":1611797407350,"results":"26","hashOfConfig":"22"},{"size":228,"mtime":1611797407282,"results":"27","hashOfConfig":"22"},{"size":810,"mtime":1611851889294,"results":"28","hashOfConfig":"22"},{"size":127,"mtime":1611797407373,"results":"29","hashOfConfig":"22"},{"size":3087,"mtime":1611797407572,"results":"30","hashOfConfig":"22"},{"size":117,"mtime":1611797407504,"results":"31","hashOfConfig":"22"},{"size":287,"mtime":1611797407486,"results":"32","hashOfConfig":"22"},{"size":118,"mtime":1611797407466,"results":"33","hashOfConfig":"22"},{"size":1935,"mtime":1611797407218,"results":"34","hashOfConfig":"22"},{"size":2584,"mtime":1611797407327,"results":"35","hashOfConfig":"22"},{"size":948,"mtime":1611797407261,"results":"36","hashOfConfig":"22"},{"size":686,"mtime":1611797407442,"results":"37","hashOfConfig":"22"},{"size":1442,"mtime":1611797407134,"results":"38","hashOfConfig":"22"},{"size":271,"mtime":1611797407548,"results":"39","hashOfConfig":"22"},{"size":425,"mtime":1611851776622,"results":"40","hashOfConfig":"22"},{"size":583,"mtime":1611852103528,"results":"41","hashOfConfig":"22"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"qj8qy9",{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"61","usedDeprecatedRules":"46"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"78","usedDeprecatedRules":"46"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"46"},{"filePath":"81","messages":"82","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"83","messages":"84","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"D:\\Work\\senla\\step13\\src\\index.tsx",[],"D:\\Work\\senla\\step13\\src\\store.tsx",[],["85","86"],"D:\\Work\\senla\\step13\\src\\services\\bookstore-service.tsx",[],"D:\\Work\\senla\\step13\\src\\components\\app\\app.tsx",["87"],"D:\\Work\\senla\\step13\\src\\components\\error-boundry\\error-boundry.tsx",[],"D:\\Work\\senla\\step13\\src\\components\\bookstore-service-context\\bookstore-service-context.tsx",[],"D:\\Work\\senla\\step13\\src\\components\\header\\header.tsx",[],"D:\\Work\\senla\\step13\\src\\components\\error-indicator\\error-indicator.tsx",[],"D:\\Work\\senla\\step13\\src\\reducers\\index.tsx",["88"],"type book = {\r\n    id: number,\r\n    title: string,\r\n    author: string,\r\n    price: number,\r\n    coverImg: string\r\n};\r\n\r\ntype cartItem = {\r\n    id: number,\r\n    title: string,\r\n    count: number,\r\n    total: number\r\n};\r\n\r\ntype defaultAction = {\r\n    type: string,\r\n    payload: any\r\n};\r\n\r\ninterface defaultState {\r\n    books: book[],\r\n    loading: boolean,\r\n    error: object | null,\r\n    cartItems: cartItem[],\r\n    orderTotal: number\r\n};\r\n\r\nconst initialState = {\r\n    books: [],\r\n    loading: true,\r\n    error: null,\r\n    cartItems: [],\r\n    orderTotal: 0\r\n};\r\n\r\nconst updateCartItems = (cartItems: cartItem[], item: cartItem, idx: number ) => {\r\n\r\n    if (item.count === 0) {\r\n        return [\r\n            ...cartItems.slice(0, idx),\r\n            ...cartItems.slice(idx + 1)\r\n        ]\r\n    }\r\n\r\n    if (idx === -1) {\r\n        return [\r\n            ...cartItems,\r\n            item\r\n        ];\r\n    }\r\n    return [\r\n        ...cartItems.slice(0, idx),\r\n        item,\r\n        ...cartItems.slice(idx + 1)\r\n    ];\r\n}\r\n\r\nconst updateItem = (book: book, item: cartItem, quantity: number) => {\r\n\r\n    if (item) {\r\n        return {\r\n            ...item,\r\n            count: item.count + quantity,\r\n            total: item.total + quantity * book.price\r\n        };\r\n    } else {\r\n        return {\r\n            id: book.id,\r\n            title: book?.title,\r\n            count: 1,\r\n            total: book?.price\r\n        };\r\n    };\r\n}\r\n\r\nconst updateOrder = (state: defaultState, bookId: number, quantity: number) => {\r\n\r\n    const { books, cartItems } = state;\r\n\r\n    const book: book = books.find((book: book) => book.id === bookId)!;\r\n    const itemIndex = cartItems.findIndex(({id}:{id: number}) => id === bookId);\r\n    const item = cartItems[itemIndex];\r\n    \r\n    const newItem = updateItem(book, item, quantity);\r\n\r\n    return {\r\n        ...state,\r\n        cartItems: updateCartItems(cartItems, newItem, itemIndex)\r\n    };\r\n}\r\n\r\nconst reducer = (state: defaultState = initialState, action: any) => {\r\n\r\n    switch (action.type) {\r\n        case 'BOOKS_REQUESTED':\r\n            return {\r\n                ...state,\r\n                books: [],\r\n                loading: true,\r\n                error: null\r\n            };\r\n        case 'BOOKS_LOADED':\r\n            return {\r\n                ...state,\r\n                books: action.payload,\r\n                loading: false,\r\n                error: null\r\n            };\r\n        case 'BOOKS_ERROR':\r\n            return {\r\n                ...state,\r\n                books: [],\r\n                loading: false,\r\n                error: action.payload\r\n            };\r\n        case 'BOOK_ADDED_TO_CART':\r\n            return updateOrder(state, action.payload, 1)\r\n\r\n        case \"BOOK_REMOVED_FROM_CART\":\r\n            return updateOrder(state, action.payload, -1)\r\n\r\n        case \"ALL_BOOKS_REMOVED_FROM_CART\":\r\n            const item = state.cartItems.find(({id}) => id === action.payload)!;\r\n            return updateOrder(state, action.payload, -item.count)\r\n\r\n        default: \r\n            return state;\r\n    }\r\n}\r\n\r\nexport default reducer;","D:\\Work\\senla\\step13\\src\\components\\pages\\index.tsx",[],"D:\\Work\\senla\\step13\\src\\components\\pages\\home-page.tsx",[],"D:\\Work\\senla\\step13\\src\\components\\pages\\cart-page.tsx",[],"D:\\Work\\senla\\step13\\src\\components\\book-list\\book-list.tsx",[],"D:\\Work\\senla\\step13\\src\\components\\cart-table\\cart-table.tsx",[],"D:\\Work\\senla\\step13\\src\\components\\book-list-item\\book-list-item.tsx",[],"D:\\Work\\senla\\step13\\src\\components\\hoc\\with-bookstore-service.tsx",[],"D:\\Work\\senla\\step13\\src\\actions\\actions.tsx",["89"],"\r\nconst booksLoaded = (newBooks: []) => {\r\n    return {\r\n        type: 'BOOKS_LOADED',\r\n        payload: newBooks\r\n    };\r\n};\r\n\r\nconst booksRequested = () => {\r\n    return {\r\n        type: 'BOOKS_REQUESTED'\r\n    }\r\n};\r\n\r\nconst booksError = (error: object) => {\r\n    return {\r\n        type: 'BOOKS_ERROR',\r\n        payload: error\r\n    }\r\n};\r\n\r\nconst bookAddedToCart = (bookId: number) => {\r\n    return {\r\n        type: \"BOOK_ADDED_TO_CART\",\r\n        payload: bookId\r\n    }\r\n}\r\n\r\nconst bookRemovedFromCart = (bookId: number) => {\r\n    return {\r\n        type: \"BOOK_REMOVED_FROM_CART\",\r\n        payload: bookId\r\n    }\r\n}\r\n\r\nconst allBooksRemovedFromCart = (bookId: number) => {\r\n    return {\r\n        type: \"ALL_BOOKS_REMOVED_FROM_CART\",\r\n        payload: bookId\r\n    }\r\n}\r\n\r\nconst fetchBooksOld = (bookstoreService: {getBooks: Function}, dispatch: Function) => () => {\r\n    dispatch(booksRequested());\r\n    bookstoreService.getBooks()\r\n    .then((data: []) => dispatch(booksLoaded(data)))\r\n    .catch((error: object) => dispatch(booksError(error)));\r\n}\r\n\r\nconst fetchBooks = (bookstoreService: {getBooks: Function}) => () => (dispatch: Function) => {\r\n    dispatch(booksRequested());\r\n    bookstoreService.getBooks()\r\n    .then((data: []) => dispatch(booksLoaded(data)))\r\n    .catch((error: object) => dispatch(booksError(error)));\r\n}\r\n\r\nexport {\r\n    fetchBooks,\r\n    bookAddedToCart,\r\n    bookRemovedFromCart,\r\n    allBooksRemovedFromCart\r\n};","D:\\Work\\senla\\step13\\src\\components\\spinner\\spinner.tsx",[],"D:\\Work\\senla\\step13\\src\\components\\theme-context\\theme-context.tsx",[],"D:\\Work\\senla\\step13\\src\\components\\theme-toggler-button\\theme-toggler-button.tsx",[],{"ruleId":"90","replacedBy":"91"},{"ruleId":"92","replacedBy":"93"},{"ruleId":"94","severity":1,"message":"95","line":1,"column":17,"nodeType":"96","messageId":"97","endLine":1,"endColumn":27},{"ruleId":"94","severity":1,"message":"98","line":16,"column":6,"nodeType":"96","messageId":"97","endLine":16,"endColumn":19},{"ruleId":"94","severity":1,"message":"99","line":43,"column":7,"nodeType":"96","messageId":"97","endLine":43,"endColumn":20},"no-native-reassign",["100"],"no-negated-in-lhs",["101"],"@typescript-eslint/no-unused-vars","'useContext' is defined but never used.","Identifier","unusedVar","'defaultAction' is defined but never used.","'fetchBooksOld' is assigned a value but never used.","no-global-assign","no-unsafe-negation"]